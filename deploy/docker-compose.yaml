services:
  # influx:
  #   image: influxdb:2
  #   volumes:
  #     - ./deploymentData/influx/data:/var/lib/influxdb2
  #     - ./deploymentData/influx/config:/etc/influxdb2
  #   ports:
  #     - 8086:8086
  #   environment:
  #     - DOCKER_INFLUXDB_INIT_MODE=setup
  #     - DOCKER_INFLUXDB_INIT_USERNAME=polar_reflow
  #     - DOCKER_INFLUXDB_INIT_PASSWORD=polar_reflow
  #     - DOCKER_INFLUXDB_INIT_ORG=my
  #     - DOCKER_INFLUXDB_INIT_BUCKET=user
  #     - DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=sdwefrejktkyukytjrjtrw

  mongo:
    image: mongodb/mongodb-community-server:7.0.3-ubuntu2204
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: example
    volumes:
      - ./deploymentData/mongo/data:/data/db

  grafana1:
    image: grafana/grafana
    ports:
      - 3000:3000
    user: "1000"
    environment:
      - GF_INSTALL_PLUGINS=yesoreyeram-infinity-datasource
      - GF_SECURITY_ADMIN_USER=admin
      - GF_SECURITY_ADMIN_PASSWORD=admin2
    volumes:
      - ./deploymentData/grafana/data:/var/lib/grafana
      - ./provisioning/grafana/datasources:/etc/grafana/provisioning/datasources/
      - ./provisioning/grafana/dashboards.yaml:/etc/grafana/provisioning/dashboards/dashboards.yaml
      - ./provisioning/grafana/dashboards/hrv.json:/var/lib/grafana/dashboards/hrv.json

  polar_reflow:
    build: ../
    ports:
      - 6969:6969
    environment:
      - POLAR_REFLOW_SERVE=true
      - POLAR_REFLOW_TOKEN=sdwefrejktkyukytjrjtrw
      - POLAR_REFLOW_ORG=my
      - POLAR_REFLOW_BUCKET=user
    depends_on:
      - mongo


